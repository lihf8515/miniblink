<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>用户登录</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body onselectstart="return false" oncontextmenu="return false">
    <form method="post" class="layui-form">
    <table>
      <tr>
        <td colspan="2" class="login-banner">
          <a class="close-win-btn" href="javascript:location.href='xcm:close'" title="关闭"></a>
        </td>
      </tr>
      <tr><td cloass="la-blank-row" colspan="2"></td></tr>
      <tr>
        <td class="center" style="width: 120px;"><img src="images/user.jpg" class="middle" /></td>
        <td>
          <table class="tb_login">
            <tr>
              <td class="title"><label class="layui-form-label" style="width: 50px;">用户名</label></td>
              <td>
                <input type="text" id="login_username" name="login_username" lay-verify="login_username" placeholder="请输入用户名" autocomplete="off" class="layui-input" style="width:150px;">
              </td>
            </tr>
            <tr><td class="sm-blank-row"></td></tr>
            <tr>
              <td class="title"><label class="layui-form-label" style="width: 50px;">密&nbsp;&nbsp;&nbsp;&nbsp;码</label></td>
              <td>
                  <input type="password" name="login_password" lay-verify="login_password" placeholder="请输入密码" autocomplete="off" class="layui-input" style="width:150px;">
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr><td colspan="2" class="sm-blank-row"></td></tr>
      <tr>
        <td colspan="2" style="text-align: center;">
          <button type="button" class="layui-btn layui-btn-sm" lay-submit lay-filter="login">登录</button>
          <button type="reset" class="layui-btn layui-btn-sm">重置</button>
        </td>
      </tr>
      <tr><td colspan="2" class="la-blank-row"></td></tr>
    </table>
    </form>
    <script src="xhf.js"></script>
    <script src="layui/layui.js"></script>
    <script>
    //JavaScript代码区域
    layui.use(['form'], function(){
      var form = layui.form, $ = layui.$;
      $("#login_username").focus();
      //登录按钮处理
      form.on('submit(login)',function (res) {
        location.href='xcm:login';
      });

      //自定义验证规则
      form.verify({
        login_username: function(value, item){ //value：表单的值、item：表单的DOM对象
          if (isEmpty(value))
          {
            return '请填写用户名';
          }
          if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
            return '用户名不能有特殊字符';
          }
          if(/(^\_)|(\__)|(\_+$)/.test(value)){
            return '用户名首尾不能出现下划线\'_\'';
          }
          if(/^\d+\d+\d$/.test(value)){
            return '用户名不能全为数字';
          }
        },
        login_password: function(value, item){
          if (isEmpty(value))
          {
            return '请填写密码';
          }
          if(!(/^[\S]{5,32}$/.test(value))){
            return '密码必须5到32位，且不能出现空格';
          }
        }
      });
    });
    </script>
  </body>
</html>
